// Define o gerador do cliente (o tradutor para JavaScript)
generator client {
  provider = "prisma-client-js"
}

// Define onde está o banco de dados
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Modelo do Hábito (A Tarefa)
model Habit {
  id         String   @id @default(uuid())
  title      String
  created_at DateTime @default(now())

  dayHabits  DayHabit[] // Relação com os dias completados
  weekDays   HabitWeekDays[]

  @@map("habits")
}

// Modelo do Dia (O Check)
model DayHabit {
  id       String   @id @default(uuid())
  
  day_id   DateTime // Data que o hábito foi completado
  
  habit_id String
  habit    Habit    @relation(fields: [habit_id], references: [id], onDelete: Cascade)

  @@unique([day_id, habit_id]) // Não pode marcar o mesmo hábito 2x no mesmo dia
  @@map("day_habits")
}

model HabitWeekDays {
  id       String @id @default(uuid())
  habit_id String
  week_day Int    // 0 = Domingo, 1 = Segunda... 6 = Sábado

  habit    Habit  @relation(fields: [habit_id], references: [id], onDelete: Cascade)

  @@unique([habit_id, week_day]) // Não pode ter 2 Segundas para o mesmo hábito
  @@map("habit_week_days")
}